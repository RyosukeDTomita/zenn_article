---
title: "EC2"
---

# EC2インスタンスを起動してSSMで接続する

## ネットワークまわりの設定
### VPCの作成
- 自分で作ったVPCを使うのが基本
- 10.0.0.0/16
- IPv6 CIDRブロックなし
- テナンシー: ハードウェアを専有すると高くなるのでdefaultに

### サブネット
- サブネットはAZをまたいで作れる --> 災害対策できる
- パブリック 10.0.10.0/24、プライベート10.0.20.0/24で作成する
- この時点ではパブリック、プライベートのサブネットの作り方は変わらない
- AZは作成時にのみ変更可能。

### ルーティング設定
- target: 次のルータのこと
- AWSではルーターは明示的に設置しない。サブネットを作ってルートテーブルを配置する=ルータの作成になる。
- ルートテーブルはサブネットやVPC単位の両方で設定できる。
- インターネットゲートウェイを作成して0.0.0.0/0はインターネットゲートウェイにルーティングさせる --> インターネットと接続できるようになる。

#### インターネットゲートウェイの作成
- VPCの画面から作成できる。
- 作成後にアクション --> 作成したvpcにアタッチする。

#### ルートテーブルの作成
- VPCの画面からルートテーブルを選ぶ。
  - ルートテーブルの作成。VPCを作ったものを指定する。
  - 作成後にサブネットの関連付けをクリックしてpublicを関連付ける。 --> 忘れると外部からアクセスできなくなる。
  - ルーティングテーブルを編集してデフォルトルートの宛先をInternet Gatewayとする。
  - 0.0.0.0 --> IG
- サブネットの設定から使用するルートテーブルを先程作成したものに変更する。

